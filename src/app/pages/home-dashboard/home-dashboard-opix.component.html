<div class="uk-section">
  <div class="uk-container uk-container-expand">

    <div class="uk-grid uk-child-width-1-4@m uk-child-width-1-4@l uk-child-width-1-1@s uk-grid-match">
      <div class="">
        <div class="uk-card uk-card-default uk-card-body uk-card-small uk-flex uk-flex-middle">
          <div><span class="material-icons uk-margin-right md-36 icons-secondary">analytics</span></div>
          <div>
            <div class="uk-margin-small-bottom uk-text-muted">Analyses submitted</div>
            <div class="uk-text-bold">{{jobs.length}}</div>
          </div>
        </div>
      </div>
<!--      <div class="uk-grid-margin">-->
<!--        <div class="uk-card uk-card-default uk-card-body uk-card-small uk-flex uk-flex-middle">-->
<!--          <div><span class="material-icons uk-margin-right md-36 icons-secondary">dataset</span></div>-->
<!--          <div>-->
<!--            <div class="uk-margin-small-bottom uk-text-muted">Resources available</div>-->
<!--            <div class="uk-text-bold">{{datasetCount}}</div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--      <div class="uk-grid-margin">-->
<!--        <div class="uk-card uk-card-default uk-card-body uk-card-small uk-flex uk-flex-middle">-->
<!--          <div><span class="material-icons uk-margin-right md-36 icons-secondary">build</span></div>-->
<!--          <div>-->
<!--            <div class="uk-margin-small-bottom uk-text-muted">Tools/Workflows available</div>-->
<!--            <div class="uk-text-bold">{{toolsCount}}</div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
    </div>

    <div class="uk-margin-medium-top uk-grid uk-child-width-1-2@m uk-child-width-1-2@l uk-child-width-1-1@s uk-grid-match" uk-height-match="target: > div > .uk-card">
      <div class="uk-grid-margin">
        <div class="uk-card uk-card-default uk-card-body uk-card-small uk-flex uk-flex-column uk-flex-between">
          <div class="uk-grid uk-visible@m">
            <div class="uk-width-3-5">
              <h5>Patent analytics</h5>
              <p>Different types of patent analyses can be performed based on the need and the questions you need to answer, and each type of analysis leads to different associated reports. Conduct your research by examining specific competitors/companies or technological class.</p>
            </div>
            <div class="uk-width-2-5">
              <img src="../assets/images/patent_1.jpg">
            </div>
          </div>
          <div class="uk-hidden@m">
            <div class="">
              <img src="../assets/images/patent_1.jpg">
            </div>
            <div class="uk-margin-top">
              <h5>Patent analytics</h5>
              <p>Different types of patent analyses can be performed based on the need and the questions you need to answer, and each type of analysis leads to different associated reports. Conduct your research by examining specific competitors/companies or technological class.</p>
            </div>
          </div>
          <div class="uk-flex uk-flex-between uk-margin-medium-top">
            <button class="uk-button uk-button-link" [routerLink]="['/landing/patent-analytics']">Learn more</button>
            <div class="uk-inline">
              <button class="uk-button uk-button-primary" type="button" uk-toggle="target: #select-patent-analysis">Start</button>
            </div>
          </div>
        </div>
      </div>
      <div class="uk-grid-margin">
        <div class="uk-card uk-card-default uk-card-body uk-card-small uk-flex uk-flex-column uk-flex-between">
          <div class="uk-grid uk-visible@m">
            <div class="uk-width-3-5">
              <h5>Bibliometric analysis</h5>
              <p>Bibliometrics Analytics is a pipeline utilizing the Field of Science classification algorithm of SciNoBo. The process finds and collects scientific publications that match Field of Science fields and various metadata, calculates indicators and provides insights using charts. It allows funders, scholars, companies and other stakeholders to organize scientific literature more effectively and calculate impact indicators.</p>
            </div>
            <div class="uk-width-2-5">
              <img src="../assets/images/bibliometrics2.jpg">
            </div>
          </div>
          <div class="uk-grid uk-hidden@m">
            <div class="">
              <img src="../assets/images/bibliometrics2.jpg">
            </div>
            <div class="uk-margin-top">
              <h5>Bibliometric analysis</h5>
              <p>Bibliometrics Analytics is a pipeline utilizing the Field of Science classification algorithm of SciNoBo. The process finds and collects scientific publications that match Field of Science fields and various metadata, calculates indicators and provides insights using charts. It allows funders, scholars, companies and other stakeholders to organize scientific literature more effectively and calculate impact indicators.</p>
            </div>
          </div>
          <div class="uk-flex uk-flex-between uk-margin-medium-top">
            <div>Coming soon..</div>
<!--            <button class="uk-button uk-button-link " [routerLink]="['/landingPage/tool/bibliometric-analysis']">Learn more</button>-->
<!--            <button class="uk-button uk-button-primary" [routerLink]="['/bibliometricAnalysis']" (click)="setReturnUrl()">-->
<!--              Start-->
<!--            </button>-->
          </div>
        </div>
      </div>
    </div>

    <div class="uk-margin-medium-top uk-grid">
      <div class="uk-width-4-5@m uk-width-4-5@l uk-width-1-1@s">
        <div class="uk-card uk-card-default uk-card-body uk-card-small">
          <div class="uk-margin-bottom">
            Latest analyses
          </div>
          <div>
            <table class="uk-table card-table">
              <thead>
              <tr>
                <th>Type</th>
                <th>Filters</th>
                <th>Dates</th>
                <th>Status</th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              <ng-container *ngIf="jobs?.length == 0">
                <tr>
                  <td colspan="5">No past analyses to show</td>
                </tr>
              </ng-container>
              <ng-container *ngIf="jobs?.length > 0">
                <tr *ngFor="let job of jobs | slice:0:3">
                  <td>
                    <ng-container *ngIf="this.getWorkflowType(job.callerAttributesObj)==='patentAnalyticsClassification'">Patent analytics classification</ng-container>
                    <ng-container *ngIf="this.getWorkflowType(job.callerAttributesObj)==='patentAnalyticsNames'">Patent analytics names</ng-container>
                    <ng-container *ngIf="this.getWorkflowType(job.callerAttributesObj)==='bibliometricAnalysis'">Bibliometrics Analysis</ng-container>
                  </td>
                  <td>
                    <a class="uk-link">{{this.getNumberOfFilters(job.callerAttributesObj)}} filters selected</a>
                    <div uk-dropdown="mode: click; pos: bottom-left" class="filters-dropdown" style="max-width: 300px !important;">
                      <div class="uk-padding-small">
                        <h6>Filters</h6>
                        <div *ngFor="let filter of getFilters(job.callerAttributesObj)" class="uk-margin-top">
                          <span>{{filter.name}}: </span>
                          <span>{{filter.value}}</span>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div *ngIf="job.createdAt" class="uk-margin-small-bottom">
                      <span class="uk-text-muted">Submitted on:</span> {{job.createdAt | date:'medium'}}
                    </div>
                    <div *ngIf="job.status && job.status.length>0 && (job.status[0].status=='FINISHED' || job.status[0].status=='finished' || job.status[0].status=='FAILED' || job.status[0].status=='failed')">
                      <span class="uk-text-muted">Finished at:</span> {{job.status[0].timestamp | date:'medium'}}
                    </div>
                  </td>
                  <td>
                    <ng-container *ngIf="job.mergedStatus==='FINISHED'"><label class="uk-label uk-label-success">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='FAILED'"><label class="uk-label uk-label-danger">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='ERROR'"><label class="uk-label uk-label-danger">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='KILLED'"><label class="uk-label uk-label-danger">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='QUEUED'"><label class="uk-label uk-label-info">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='RUNNING'"><label class="uk-label uk-label-info">{{job.mergedStatus}}</label></ng-container>
                    <ng-container *ngIf="job.mergedStatus==='CANCELLED'"><label class="uk-label uk-label-secondary">{{job.mergedStatus}}</label></ng-container>
                  </td>
                  <td>
                    <ng-container *ngIf="job.mergedStatus === 'FINISHED'">
                      <a [routerLink]="['/result', job.id]" uk-tooltip="View results..">
                        <span class="material-icons icons-secondary">arrow_forward</span>
                      </a>
                    </ng-container>
                  </td>
                </tr>
              </ng-container>
              </tbody>
            </table>
          </div>
          <div class="uk-margin-top" >
            <a class="uk-link" [routerLink]="['/workflowSearch']">
              <span>Show more ...</span>
<!--              <span class="material-icons uk-margin-small-left">east</span>-->
            </a>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div id="select-patent-analysis" class=" uk-flex-top" uk-modal>
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
    <button class="uk-modal-close-default" type="button" uk-close></button>
    <h6>Conduct your research by examining:</h6>
    <div class="uk-grid-divider uk-child-width-1-2 uk-grid-match uk-margin-medium-top" uk-grid>
      <div>
        <p>specific competitors/companies</p>
        <p class="uk-text-right">
          <a class="uk-button uk-button-primary" [routerLink]="['/patent-analytics-names']" (click)="setReturnUrl()">
            Select
          </a>
        </p>
      </div>
      <div>
        <p>technological class</p>
        <p class="uk-text-right">
          <a class="uk-button uk-button-primary" [routerLink]="['/patent-analytics-classifications']" (click)="setReturnUrl()">
            Select
          </a>
        </p>
      </div>
    </div>
  </div>
</div>
